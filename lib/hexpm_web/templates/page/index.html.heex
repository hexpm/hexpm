<%!-- Hero Section --%>
<div class="tw:bg-white">
  <div class="tw:bg-grey-50 tw:pb-10">
    <div class="tw:max-w-6xl tw:mx-auto tw:px-4 tw:pt-12 tw:pb-16 tw:md:pt-20 tw:md:pb-24">
      <div class="tw:flex tw:flex-col tw:lg:flex-row tw:items-center tw:gap-6">
        <%!-- Left side - headline and CTAs --%>
        <div class="tw:flex tw:flex-col tw:gap-8 tw:flex-1 tw:mb-24">
          <h1 class="tw:text-grey-800 tw:text-4xl tw:font-semibold tw:leading-tight tw:md:text-5xl tw:md:leading-[60px]">
            The package manager<br />for the Erlang ecosystem
          </h1>

          <div class="tw:flex tw:flex-wrap tw:items-center tw:gap-4 tw:md:gap-14">
            <a
              href={~p"/docs/usage"}
              class="tw:inline-flex tw:items-center tw:gap-3 tw:px-10 tw:py-5 tw:border-[1.5px] tw:border-primary-600 tw:bg-transparent tw:text-primary-600 tw:font-medium tw:text-lg tw:rounded-xl tw:hover:bg-primary-600 tw:hover:text-white tw:hover:border-primary-600 tw:transition-all tw:duration-200"
            >
              Getting Started {icon(:heroicon, "arrow-right", class: "tw:size-[18px]")}
            </a>
            <a
              href={~p"/docs/publish"}
              class="tw:text-grey-500 tw:font-medium tw:text-lg tw:hover:text-grey-800 tw:transition-colors"
            >
              Publish Packages
            </a>
          </div>
        </div>
        <img
          src={~p"/images/home/packages.png"}
          alt="Packages"
          class="tw:w-full tw:lg:w-1/2 tw:max-w-xl"
        />
      </div>
    </div>
  </div>

  <%!-- Using with Elixir/Erlang/Gleam cards --%>
  <div class="tw:max-w-7xl tw:mx-auto tw:px-4 tw:pb-16 tw:-mt-30">
    <div class="tw:grid tw:grid-cols-1 tw:md:grid-cols-2 tw:lg:grid-cols-3 tw:gap-6">
      <.language_card language="Elixir" image_src={~p"/images/elixir.svg"} href={~p"/docs/usage"}>
        Specify your Mix dependencies as two-item tuples like
        <.code_inline>{"{:plug, \"~> 1.1.0\"}"}</.code_inline>
        in your dependency list, Elixir will ask if you want to install Hex if you haven't already.
      </.language_card>

      <.language_card
        language="Erlang"
        image_src={~p"/images/erlang.svg"}
        href={~p"/docs/rebar3-usage"}
      >
        Download rebar3, put it in your PATH and give it executable permissions. Now you can specify Hex dependencies in your rebar.config like <.code_inline>{"{deps, [hackney]}"}</.code_inline>.
      </.language_card>

      <.language_card
        language="Gleam"
        image_src={~p"/images/lucy.svg"}
        href={~p"/docs/gleam-usage"}
      >
        Add the Hex dependency to your
        <.code_inline>gleam.toml</.code_inline>
        file using the
        <.code_inline>{"lustre = \">= 5.2.0 and < 6.0.0\""}</.code_inline>
        format. Or use the
        <.code_inline>{"gleam add lustre@5"}</.code_inline>
        command.
      </.language_card>
    </div>
  </div>

  <%!-- Companies --%>
  <.companies_section />

  <%!-- Getting Started Section --%>
  <div class="tw:bg-white tw:py-4">
    <div class="tw:max-w-7xl tw:mx-auto tw:px-4">
      <div class="tw:grid tw:grid-cols-1 tw:md:grid-cols-3 tw:gap-6">
        <.feature_card icon="cloud-arrow-down" title="Getting started" href={~p"/docs/usage"}>
          Fetch dependencies from Hex without creating an account. Hex is usable out of the box in Elixir with
          <.text_link href={~p"/docs/usage"} variant="purple">Mix</.text_link>
          and in Erlang with <.text_link href={~p"/docs/rebar3-usage"} variant="purple">Rebar3</.text_link>.
          Check our <.text_link href={~p"/docs/faq"} variant="purple">FAQ</.text_link>
          for commonly asked questions.
        </.feature_card>

        <.feature_card icon="cloud-arrow-up" title="Publish packages" href={~p"/docs/publish"}>
          <.text_link href={~p"/signup"} variant="purple">Create an account</.text_link>
          and follow the <.text_link href={~p"/docs/publish"} variant="purple">publishing guide</.text_link>.
          Your package will be immediately available to all Elixir and Erlang users and the documentation will be available on <.text_link
            href="https://hexdocs.pm"
            variant="purple"
            target="_blank"
            rel="noopener"
          >
            HexDocs
          </.text_link>.
        </.feature_card>

        <.feature_card icon="shield-check" title="Private packages" href={~p"/pricing"}>
          Publish private packages by <.text_link href={~p"/dashboard/orgs"} variant="purple">creating an organization</.text_link>.
          Your private packages will get the same features as public packages such as fast dependency fetching, HexDocs, and run on the same reliable infrastructure that serves millions of packages daily. See our
          <.text_link href={~p"/pricing"} variant="purple">pricing page</.text_link>
          for more details.
        </.feature_card>
      </div>
    </div>
  </div>

  <%!-- Package columns section --%>
  <div class="tw:bg-white">
    <div class="tw:max-w-7xl tw:mx-auto tw:px-4 tw:py-12 tw:md:py-16">
      <div class="tw:grid tw:grid-cols-1 tw:md:grid-cols-3 tw:gap-6 tw:lg:gap-8">
        <%!-- Most Downloaded --%>
        <div>
          <.package_column_header color="primary" emoji="ðŸ˜" title="Most Downloaded" />
          <ul class="tw:flex tw:flex-col">
            <%= for {package, downloads} <- @package_top do %>
              <.package_item
                description={package.meta.description}
                downloads={downloads}
                package={package.name}
                version={package.latest_release.version}
              />
            <% end %>
          </ul>
        </div>

        <%!-- New Packages --%>
        <div>
          <.package_column_header color="green" emoji="ðŸ”¥" title="New Packages" />
          <ul class="tw:flex tw:flex-col">
            <%= for {package, _inserted_at, %PackageMetadata{} = meta, version, downloads} <- @package_new do %>
              <.package_item
                description={meta.description}
                package={package}
                version={version && to_string(version)}
                downloads={downloads}
              />
            <% end %>
          </ul>
        </div>

        <%!-- Recently Updated --%>
        <div>
          <.package_column_header color="blue" emoji="ðŸ‘€" title="Recently Updated" />
          <ul class="tw:flex tw:flex-col">
            <%= for {package, version, _inserted_at, %PackageMetadata{} = meta, downloads} <- @releases_new do %>
              <.package_item
                description={meta.description}
                package={package}
                version={to_string(version)}
                downloads={downloads}
              />
            <% end %>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <%!-- Open source section with stats --%>
  <div class="tw:bg-primary-900 tw:pb-32 tw:md:pb-48">
    <div class="tw:max-w-7xl tw:mx-auto tw:px-4 tw:pt-12 tw:md:pt-16">
      <div class="tw:flex tw:flex-col tw:lg:flex-row tw:items-start">
        <%!-- Left side - open source message --%>
        <div class="tw:flex tw:flex-col tw:gap-6 tw:lg:flex-1">
          <img
            src={~p"/images/home/open-source.svg"}
            alt="Open Source"
            class="tw:size-[60px]"
          />

          <h2 class="tw:text-white tw:text-4xl tw:font-bold tw:leading-tight tw:md:text-5xl tw:md:leading-[60px]">
            hex.pm is<br />open-source
          </h2>
        </div>

        <%!-- Right side - screenshot with geometric decoration (overflows into white section) --%>
        <div class="tw:flex-1 tw:hidden tw:lg:block tw:relative">
          <div class="tw:absolute tw:pt-12">
            <%!-- Geometric figure positioned behind image --%>
            <div class="tw:absolute tw:-top-3 tw:-left-14 tw:w-32 tw:h-32 tw:bg-[#69438d] tw:rounded-full tw:flex tw:items-center tw:justify-center">
              <%!-- Inner circle with primary-900 background --%>
              <div class="tw:w-16 tw:h-16 tw:bg-primary-900 tw:rounded-full"></div>
            </div>
            <%!-- hex.pm screenshot image (extends into white section below) --%>
            <div class="tw:relative tw:z-20">
              <img
                src={~p"/images/home/webview.svg"}
                alt="Hex.pm interface"
                class="tw:w-full tw:rounded-lg tw:shadow-2xl"
              />
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <%!-- Stats section --%>
  <div class="tw:bg-white tw:-mt-20 tw:md:-mt-32 tw:pb-24 tw:relative tw:z-10">
    <div class="tw:max-w-7xl tw:mx-auto tw:px-4 tw:pt-16 tw:md:pb-16">
      <div class="tw:flex tw:flex-col tw:lg:flex-row tw:gap-12">
        <%!-- Left side: Stats (2x2 grid) --%>
        <div class="tw:lg:flex-1">
          <div class="tw:grid tw:grid-cols-1 tw:md:grid-cols-2 tw:gap-6 tw:lg:gap-8">
            <.stat_item icon="archive-box" number={@num_packages} label="packages available" />
            <.stat_item icon="rectangle-stack" number={@num_releases} label="package versions" />
            <.stat_item icon="arrow-down-tray" number={@total["day"]} label="downloads yesterday" />
            <.stat_item icon="users" number={@total["all"]} label="downloads all time" />
          </div>

          <%!-- CTAs below stats --%>
          <div class="tw:flex tw:flex-wrap tw:items-center tw:gap-6 tw:mt-10">
            <.button_link href={~p"/signup"} size="lg" variant="blue">
              Get Started for FREE
            </.button_link>
            <.text_link href={~p"/pricing"} variant="primary">
              Private Packages @ $7/month
            </.text_link>
          </div>
        </div>

        <%!-- Right side: Empty (image overflows here from purple section) --%>
        <div class="tw:hidden tw:lg:block tw:flex-1">
          <%!-- Intentionally empty - screenshot image overflows into this space --%>
        </div>
      </div>
    </div>
  </div>
</div>
